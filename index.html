<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•Œë‘ê°€ (Alangga) - ë‹¹ì‹ ì˜ ì§„ì‹¬, ì‹¤íŒ¨ ì—†ëŠ” ì„ íƒ</title>
    <style>
        :root {
            --primary: #ff4d6d;
            --secondary: #212529;
            --accent: #ff8fa3;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --text: #333333;
            --shadow: 0 8px 30px rgba(0,0,0,0.08);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Pretendard', sans-serif; }
        body { background-color: var(--bg); color: var(--text); line-height: 1.6; }

        /* Header */
        header {
            padding: 15px 20px;
            background: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        header .logo { font-size: 1.5rem; font-weight: 900; color: var(--primary); letter-spacing: -1px; }

        /* Hero Section */
        .hero {
            background: #fff;
            padding: 60px 20px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
        }
        .hero h1 { font-size: 2rem; font-weight: 800; margin-bottom: 15px; color: var(--secondary); word-break: keep-all; }
        .hero p { color: #666; font-size: 1.1rem; margin-bottom: 40px; }

        .situation-buttons {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }
        .sit-btn {
            padding: 22px;
            border: 2px solid #eee;
            border-radius: 18px;
            background: #fff;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        .sit-btn:hover, .sit-btn.active {
            border-color: var(--primary);
            color: var(--primary);
            background: #fff5f6;
            transform: translateY(-2px);
        }

        /* Product List */
        .container { max-width: 1000px; margin: 0 auto; padding: 40px 20px; }
        .section-title { font-size: 1.5rem; font-weight: 800; margin-bottom: 30px; display: none; text-align: center; }
        
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        .product-card {
            background: var(--card-bg);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            border: 1px solid #f0f0f0;
        }
        .product-card:hover { transform: translateY(-8px); }
        .product-img { width: 100%; height: 280px; background: #f0f0f0; object-fit: cover; }
        .product-info { padding: 25px; }
        .product-tag { font-size: 0.8rem; color: var(--primary); font-weight: 700; margin-bottom: 8px; background: #fff5f6; display: inline-block; padding: 2px 8px; border-radius: 6px; }
        .product-name { font-size: 1.2rem; font-weight: 800; margin-bottom: 10px; }
        .product-price { font-size: 1.3rem; font-weight: 900; color: #111; }
        .product-meta { font-size: 0.9rem; color: #777; margin-top: 15px; padding-top: 15px; border-top: 1px dashed #eee; display: flex; justify-content: space-between; }
        
        .buy-btn {
            width: 100%;
            padding: 16px;
            background: var(--secondary);
            color: #fff;
            border: none;
            border-radius: 14px;
            margin-top: 20px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
        }

        /* Modal & UI Refinement */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal-content {
            background: #fff;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            border-radius: 32px;
            padding: 40px;
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 30px;
            overflow-y: auto;
        }

        .modal-left { display: flex; flex-direction: column; }
        .modal-right { display: flex; flex-direction: column; justify-content: flex-start; background: #f9f9f9; border-radius: 24px; padding: 25px; }

        .situation-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 25px;
        }
        .chip {
            padding: 10px 16px;
            background: #f0f2f5;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid transparent;
            transition: 0.2s;
        }
        .chip:hover { background: #e4e6e9; }
        .chip.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* Card Preview */
        .card-preview {
            aspect-ratio: 4/3;
            background: #fff;
            border-radius: 4px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            padding: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            background-image: radial-gradient(#f0f0f0 1px, transparent 1px);
            background-size: 15px 15px;
            border: 1px solid #eee;
        }
        .card-text {
            font-family: 'Gowun Batang', serif;
            font-size: 1.1rem;
            color: #444;
            line-height: 1.8;
            white-space: pre-wrap;
            word-break: keep-all;
        }

        .ai-options { display: flex; flex-direction: column; gap: 12px; margin-top: 10px; }
        .ai-option-card {
            padding: 18px;
            border: 2px solid #f0f0f0;
            border-radius: 16px;
            cursor: pointer;
            transition: 0.2s;
            background: #fff;
        }
        .ai-option-card:hover { border-color: var(--primary); background: #fffcfc; transform: translateX(5px); }
        .ai-option-card.selected { border-color: var(--primary); background: #fffcfc; box-shadow: 0 4px 12px rgba(255, 77, 109, 0.1); }
        .ai-option-card .tone-label { font-size: 0.75rem; font-weight: 800; color: var(--primary); margin-bottom: 6px; display: block; text-transform: uppercase; letter-spacing: 0.5px; }
        .ai-option-card p { font-size: 0.95rem; color: #444; line-height: 1.5; font-weight: 500; }

        .final-buy-btn {
            width: 100%;
            padding: 22px;
            background: var(--primary);
            color: #fff;
            border: none;
            border-radius: 18px;
            font-size: 1.2rem;
            font-weight: 800;
            margin-top: 30px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(255, 77, 109, 0.3);
            transition: all 0.2s;
        }
        .final-buy-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(255, 77, 109, 0.4); }

        @media (max-width: 850px) {
            .modal-content { grid-template-columns: 1fr; padding: 25px; }
            .modal-right { order: -1; padding: 15px; }
            .card-preview { aspect-ratio: 16/9; }
        }
    </style>
    <!-- êµ¬ê¸€ í°íŠ¸ (ë‚˜ë¦„ì˜ ê°ì„±ì„ ìœ„í•´) -->
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

<header>
    <div class="logo">ALANGGA</div>
</header>

<section class="hero">
    <h1>ë‹¹ì‹ ì˜ ì§„ì‹¬, ê°€ì¥ ë¹ ë¥´ê³  ì„¼ìŠ¤ ìˆê²Œ ì „ë‹¬í•´ ë“œë¦½ë‹ˆë‹¤</h1>
    <p>ì§€ê¸ˆ ì–´ë–¤ ìƒí™©ì´ì‹ ê°€ìš”?</p>
    <div class="situation-buttons">
        <button class="sit-btn" onclick="filterProducts('apology', this)">ğŸš¨ ìœ„ê¸° íƒˆì¶œ ì‚¬ê³¼ìš©</button>
        <button class="sit-btn" onclick="filterProducts('surprise', this)">ğŸ’¼ ì§ì¥ ì±…ìƒ ê¹œì§ ë°°ì†¡</button>
        <button class="sit-btn" onclick="filterProducts('anniversary', this)">â¤ï¸ íŠ¹ë³„í•œ ê¸°ë…ì¼</button>
    </div>
</section>

<main class="container">
    <h2 id="section-title" class="section-title">ì¶”ì²œ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸</h2>
    <div id="product-list" class="product-grid">
        <!-- ìƒí’ˆ ì‚½ì… -->
    </div>
</main>

<section class="container" style="margin-top: 60px; border-top: 1px solid #eee; padding-top: 60px; margin-bottom: 100px;">
    <div style="max-width: 600px; margin: 0 auto; text-align: center;">
        <h2 style="font-size: 1.8rem; font-weight: 900; margin-bottom: 15px; color: var(--secondary);">ì œíœ´ ë° ë¬¸ì˜</h2>
        <p style="color: #888; margin-bottom: 40px;">ì•Œë‘ê°€ì™€ í•¨ê»˜ ì§„ì‹¬ì„ ì „í•  íŒŒíŠ¸ë„ˆë¥¼ ì°¾ìŠµë‹ˆë‹¤.</p>
        
        <form action="https://formspree.io/f/mpqjjynz" method="POST" style="text-align: left; background: #fff; padding: 40px; border-radius: 24px; box-shadow: var(--shadow);">
            <div style="margin-bottom: 20px;">
                <label style="display: block; font-size: 0.9rem; font-weight: 700; margin-bottom: 8px; color: #444;">ì´ë©”ì¼ ì£¼ì†Œ</label>
                <input type="email" name="email" required placeholder="your@email.com" style="width: 100%; padding: 14px; border: 2px solid #f0f0f0; border-radius: 12px; font-size: 1rem;">
            </div>
            <div style="margin-bottom: 20px;">
                <label style="display: block; font-size: 0.9rem; font-weight: 700; margin-bottom: 8px; color: #444;">ë¬¸ì˜ ìœ í˜•</label>
                <select name="type" style="width: 100%; padding: 14px; border: 2px solid #f0f0f0; border-radius: 12px; font-size: 1rem; background: #fff;">
                    <option value="ì œíœ´">ê½ƒì§‘ ì…ì /ì œíœ´ ë¬¸ì˜</option>
                    <option value="ê¸°ì—…">ê¸°ì—… ë‹¨ì²´ ì£¼ë¬¸ ë¬¸ì˜</option>
                    <option value="ê¸°íƒ€">ê¸°íƒ€ ë¬¸ì˜</option>
                </select>
            </div>
            <div style="margin-bottom: 30px;">
                <label style="display: block; font-size: 0.9rem; font-weight: 700; margin-bottom: 8px; color: #444;">ë¬¸ì˜ ë‚´ìš©</label>
                <textarea name="message" required placeholder="ìƒì„¸ ë‚´ìš©ì„ ì ì–´ì£¼ì„¸ìš”." style="width: 100%; padding: 14px; border: 2px solid #f0f0f0; border-radius: 12px; font-size: 1rem; height: 120px; resize: none;"></textarea>
            </div>
            <button type="submit" style="width: 100%; padding: 18px; background: var(--secondary); color: #fff; border: none; border-radius: 14px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: 0.2s;">
                ë¬¸ì˜ ë³´ë‚´ê¸°
            </button>
        </form>
    </div>
</section>

<div id="checkout-modal" class="modal">
    <div class="modal-content">
        <div class="modal-left">
            <h2 style="font-weight: 900; margin-bottom: 10px;">ìƒí™© ì„ íƒ</h2>
            <p style="color: #888; font-size: 0.9rem; margin-bottom: 25px;">ê°€ì¥ ê°€ê¹Œìš´ ìƒí™©ì„ ê³¨ë¼ì£¼ì„¸ìš”. AIê°€ ì„¼ìŠ¤ ìˆëŠ” ë¬¸êµ¬ë¥¼ ì œì•ˆí•©ë‹ˆë‹¤.</p>
            
            <div id="situation-chips" class="situation-chips">
                <!-- ì¹© ì‚½ì… -->
            </div>

            <div id="ai-options" class="ai-options">
                <!-- AI ì œì•ˆ ë¬¸êµ¬ ì‚½ì… -->
            </div>

            <button class="final-buy-btn" onclick="completePurchase()">ê²°ì œí•˜ê³  ì¹´ë“œ ë°œì†¡í•˜ê¸°</button>
            <button onclick="closeModal()" style="background:none; border:none; color:#bbb; margin-top:20px; cursor:pointer; text-decoration:underline; font-size:0.9rem;">ëŒì•„ê°€ê¸°</button>
        </div>

        <div class="modal-right">
            <h3 style="font-size: 0.9rem; margin-bottom: 20px; color: #555; text-align: center; font-weight: 700;">ì‹¤ì œ ë©”ì‹œì§€ ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°</h3>
            <div class="card-preview">
                <div id="preview-text" class="card-text">ì™¼ìª½ì—ì„œ ìƒí™©ê³¼ ë¬¸êµ¬ë¥¼ ì„ íƒí•˜ì‹œë©´<br>ë§ˆìŒì´ ë‹´ê¸´ ì¹´ë“œê°€ ì™„ì„±ë©ë‹ˆë‹¤.</div>
            </div>
            <div style="margin-top: 25px; padding: 15px; background: #fff; border-radius: 12px; border: 1px solid #eee;">
                <p style="font-size: 0.8rem; color: #666; line-height: 1.5;">
                    ğŸ’¡ <strong>Tip:</strong> AI ì½”ì¹˜ê°€ ì œì•ˆí•˜ëŠ” ë¬¸êµ¬ëŠ” ìƒëŒ€ë°©ì´ ë¶€ë‹´ì„ ëŠë¼ì§€ ì•Šë„ë¡ ë§¤ìš° ë‹´ë°±í•˜ê²Œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    const PRODUCTS = [
        { id: 1, category: 'apology', name: 'í™”í•´ì˜ ë°±í•© í´ë˜ì‹', price: '49,000', time: '90ë¶„ ì´ë‚´', tag: 'ì‚¬ê³¼ ì„±ê³µë¥  1ìœ„', img: 'https://images.unsplash.com/photo-1596003903067-bf5762ad5c19?auto=format&fit=crop&w=600&q=80' },
        { id: 2, category: 'apology', name: 'ì§„ì‹¬ ì „ë‹¬ ë ˆë“œ ì¥ë¯¸', price: '55,000', time: '2ì‹œê°„ ì´ë‚´', tag: 'ê°€ì¥ ì§„ì¤‘í•œ ì„ íƒ', img: 'https://images.unsplash.com/photo-1582794543139-8ac9cb0f7b11?auto=format&fit=crop&w=600&q=80' },
        { id: 4, category: 'surprise', name: 'ì˜¤í”¼ìŠ¤ í™œë ¥ ê±°ë² ë¼', price: '35,000', time: '60ë¶„ ì´ë‚´', tag: 'ê¸°ë¶„ ì „í™˜ ì§ë¹µ', img: 'https://images.unsplash.com/photo-1533616688419-b7a585564566?auto=format&fit=crop&w=600&q=80' },
        { id: 6, category: 'anniversary', name: 'í”„ë¦¬ë¯¸ì—„ ë¡œì¦ˆ ê³¨ë“œ ë°•ìŠ¤', price: '98,000', time: 'ì˜ˆì•½ ë°°ì†¡ ì „ìš©', tag: 'ì••ë„ì  ë¶„ìœ„ê¸°', img: 'https://images.unsplash.com/photo-1526047932273-341f2a7631f9?auto=format&fit=crop&w=600&q=80' }
    ];

    const SITUATIONS = {
        'apology': ['ì–´ì œ í¬ê²Œ ë‹¤í‰œì„ ë•Œ', 'ê¸°ë…ì¼ì„ ê¹œë¹¡í–ˆì„ ë•Œ', 'ë‹µì¥ì´ ë„ˆë¬´ ëŠ¦ì—ˆì„ ë•Œ', 'ë‚˜ì˜ ì‹¤ìˆ˜ë¡œ ì„œìš´í•˜ê²Œ í–ˆì„ ë•Œ'],
        'surprise': ['ìš”ì¦˜ ë°”ë¹ ì„œ ëª» ì±™ê²¨ì¤¬ì„ ë•Œ', 'ì§ì¥ ìŠ¤íŠ¸ë ˆìŠ¤ë°›ì•„ í•  ë•Œ', 'ê·¸ëƒ¥ ë¬¸ë“ ë³´ê³  ì‹¶ì„ ë•Œ', 'ì›”ìš”ë³‘ìœ¼ë¡œ í˜ë“¤ì–´í•  ë•Œ'],
        'anniversary': ['ì²˜ìŒ ë§Œë‚œ ë‚ ì„ ì¶•í•˜í•˜ë©°', '100ì¼/1ì£¼ë…„ ê¸°ë…ì¼', 'ìƒì¼ì„ ë” íŠ¹ë³„í•˜ê²Œ', 'ìš°ë¦¬ì˜ ì†Œì¤‘í•œ ë¯¸ë˜ë¥¼ ìœ„í•´']
    };

    const AI_LOGIC = {
        'ì–´ì œ í¬ê²Œ ë‹¤í‰œì„ ë•Œ': {
            'ë‹´ë°±í•œ ì‚¬ê³¼í˜•': "ì–´ì œëŠ” ë‚´ê°€ ì •ë§ ë¯¸ì•ˆí–ˆì–´.\nìƒê°í• ìˆ˜ë¡ ë§ˆìŒì´ ì•ˆ ì¢‹ë„¤.\nìš°ë¦¬ ê½ƒ ë³´ë©´ì„œ ì¡°ê¸ˆì´ë¼ë„ í™” í’€ì.",
            'ê·€ì—¬ìš´ ì• êµí˜•': "ì–´ì œì˜ ëª»ë‚œ ë‚˜ë¥¼ í•œ ë²ˆë§Œ ë´ì£¼ë©´ ì•ˆ ë ê¹Œ?\në§›ìˆëŠ” ê±° ì‚¬ë“¤ê³  ê¸°ë‹¤ë¦´ê²Œ.\nê½ƒì´ë‘ ê°™ì´ í™”í•´ ë°›ì•„ì¤˜!",
            'ì¸¤ë°ë ˆí˜•': "ì§€ë‚˜ê°€ë‹¤ ì˜ˆë»ì„œ ìƒ€ì–´.\nì–´ì œ ì¼ì€ ë‚´ê°€ ë¯¸ì•ˆí•˜ë‹ˆê¹Œ\nì´ê±° ë³´ê³  ëŒ€ì¶© í‰ì¹˜ì."
        },
        'ê¸°ë…ì¼ì„ ê¹œë¹¡í–ˆì„ ë•Œ': {
            'ë‹´ë°±í•œ ì‚¬ê³¼í˜•': "ì •ë§ ì¤‘ìš”í•œ ë‚ ì¸ë° ì •ì‹ ì´ ì—†ì—ˆë„¤.\nì§„ì‹¬ìœ¼ë¡œ ë¯¸ì•ˆí•´.\nëŠ¦ì—ˆì§€ë§Œ ìš°ë¦¬ ì˜¤ëŠ˜ ë” í–‰ë³µí•˜ê²Œ ë³´ë‚´ì.",
            'ê·€ì—¬ìš´ ì• êµí˜•': "ë‚˜ ë¨¸ë¦¿ì†ì— ì§€ìš°ê°œ ìˆë‚˜ ë´...\nì£½ì„ì£„ë¥¼ ì§€ì—ˆìŠµë‹ˆë‹¤!\nì˜¤ëŠ˜ ë‚´ê°€ í•˜ë£¨ ì¢…ì¼ ê³µì£¼ ëŒ€ì ‘ í•´ì¤„ê²Œ.",
            'ì¸¤ë°ë ˆí˜•': "ê¹œë¹¡í•œ ê±° ì•„ë‹ˆê³  ì„œí”„ë¼ì´ì¦ˆ ì¤€ë¹„ ì¤‘ì´ì—ˆì–´.\në¯¿ê¸° í˜ë“¤ê² ì§€ë§Œ ì§„ì§œì•¼.\nëŠ¦ì–´ì„œ ë¯¸ì•ˆ, ì‚¬ë‘í•´."
        },
        'ìš”ì¦˜ ë°”ë¹ ì„œ ëª» ì±™ê²¨ì¤¬ì„ ë•Œ': {
            'ë‹´ë°±í•œ ì‚¬ê³¼í˜•': "ìš”ì¦˜ ë„ˆë¬´ ë‚´ ìƒê°ë§Œ í•˜ëŠë¼ ë„ ëª» ì±™ê²¼ë„¤.\nëŠ˜ ì˜†ì— ìˆì–´ì¤˜ì„œ ê³ ë§ˆì›Œ.\nì´ë²ˆ ì£¼ë§ì—” ì˜¨ì „íˆ ë„ˆí•œí…Œë§Œ ì§‘ì¤‘í• ê²Œ.",
            'ê·€ì—¬ìš´ ì• êµí˜•': "ë‚˜ ë“œë””ì–´ ë°”ìœ ê±° ëë‚¬ë‹¤!\nê·¸ë™ì•ˆ ê¸°ë‹¤ë ¤ì¤˜ì„œ ë„ˆë¬´ ê³ ë§ˆì›Œ.\në‚´ ë§ˆìŒ ì„ ê²°ì œí•˜ë‹ˆê¹Œ ë¹¨ë¦¬ ë§Œë‚˜ì.",
            'ì¸¤ë°ë ˆí˜•': "ë°”ë¹ ì„œ ì‹ ê²½ ëª» ì¼ë”ë‹ˆ ì¢€ ë§ˆìŒì— ê±¸ë ¤ì„œ.\nì˜¤ë‹¤ ì£¼ì› ìœ¼ë‹ˆê¹Œ ë²„ë¦¬ì§€ ë§ê³  ì˜ ë‘¬."
        },
        'ì§ì¥ ìŠ¤íŠ¸ë ˆìŠ¤ë°›ì•„ í•  ë•Œ': {
            'ë‹´ë°±í•œ ì‚¬ê³¼í˜•': "ì˜¤ëŠ˜ í•˜ë£¨ë„ ì •ë§ ê³ ìƒ ë§ì•˜ì–´.\në„¤ê°€ ì–¼ë§ˆë‚˜ ì—´ì‹¬íˆ í•˜ëŠ”ì§€ ì˜ ì•Œì•„.\nê½ƒ ë³´ë©´ì„œ ì ì‹œë¼ë„ ì›ƒì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤.",
            'ê·€ì—¬ìš´ ì• êµí˜•': "í˜ë“  íšŒì‚¬ ìƒí™œì— ê½ƒ í•œ ìŠ¤í‘¼!\në‚´ê°€ ë’¤ì—ì„œ í•­ìƒ ì‘ì›í•˜ê³  ìˆëŠ” ê±° ì•Œì§€?\ní‡´ê·¼í•˜ê³  ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ëŸ¬ ê°€ì.",
            'ì¸¤ë°ë ˆí˜•': "ëˆ„ê°€ ìš°ë¦¬ OO ìŠ¤íŠ¸ë ˆìŠ¤ ì£¼ëƒ.\nê½ƒ ë³´ë©´ì„œ íë§í•˜ê³  ë¹¨ë¦¬ í‡´ê·¼í•´.\nì§‘ì—ì„œ ë§›ìˆëŠ” ê±° ëŒ€ê¸° ì¤‘ì„."
        }
    };

    let currentCategory = '';

    function filterProducts(category, btn) {
        currentCategory = category;
        const listContainer = document.getElementById('product-list');
        document.querySelectorAll('.sit-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const filtered = PRODUCTS.filter(p => p.category === category);
        listContainer.innerHTML = filtered.map(p => `
            <div class="product-card">
                <img src="${p.img}" class="product-img">
                <div class="product-info">
                    <div class="product-tag">${p.tag}</div>
                    <div class="product-name">${p.name}</div>
                    <div class="product-price">â‚©${p.price}</div>
                    <button class="buy-btn" onclick="openModal()">ì£¼ë¬¸í•˜ê¸°</button>
                </div>
            </div>
        `).join('');
        document.getElementById('section-title').style.display = 'block';
        window.scrollTo({ top: 450, behavior: 'smooth' });
    }

    function openModal() {
        document.getElementById('checkout-modal').style.display = 'flex';
        renderChips();
    }

    function closeModal() {
        document.getElementById('checkout-modal').style.display = 'none';
    }

    function renderChips() {
        const chipContainer = document.getElementById('situation-chips');
        const chips = SITUATIONS[currentCategory] || SITUATIONS['surprise'];
        chipContainer.innerHTML = chips.map(c => `<div class="chip" onclick="selectSituation(this, '${c}')">${c}</div>`).join('');
        document.getElementById('ai-options').innerHTML = '';
        document.getElementById('preview-text').innerHTML = "ì™¼ìª½ì—ì„œ ìƒí™©ê³¼ ë¬¸êµ¬ë¥¼ ì„ íƒí•˜ì‹œë©´<br>ë§ˆìŒì´ ë‹´ê¸´ ì¹´ë“œê°€ ì™„ì„±ë©ë‹ˆë‹¤.";
    }

    function selectSituation(el, sit) {
        document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
        
        const options = AI_LOGIC[sit] || {
            'ë‹´ë°±í•œ ì‚¬ê³¼í˜•': `${sit} ìƒí™©ì— ë§ëŠ” ë‹´ë°±í•œ ìœ„ë¡œë¥¼ ì „í•©ë‹ˆë‹¤.\nì˜¤ëŠ˜ë„ ê³ ìƒ ë§ì•˜ê³  ëŠ˜ ì‘ì›í•˜ê³  ìˆì–´.`,
            'ê·€ì—¬ìš´ ì• êµí˜•': `${sit}! í—¤í—¤ ë‚´ê°€ ë” ì˜í• ê²Œ.\nì´ ê½ƒì²˜ëŸ¼ ì˜ˆì˜ê²Œ ì›ƒì–´ì£¼ë©´ ì•ˆ ë ê¹Œ?`,
            'ì¸¤ë°ë ˆí˜•': `ê·¸ëƒ¥ ìƒê°ë‚˜ì„œ ë³´ë‚¸ ê±°ë‹ˆê¹Œ\në¶€ë‹´ ê°–ì§€ ë§ê³  ë°›ì•„. ì˜¤ë‹¤ ì£¼ì› ë‹¤.`
        };

        const aiContainer = document.getElementById('ai-options');
        aiContainer.innerHTML = Object.entries(options).map(([tone, text]) => `
            <div class="ai-option-card" onclick="updatePreview(this, '${text.replace(/'/g, "\\'").replace(/\n/g, "\\n")}')">
                <span class="tone-label">${tone}</span>
                <p>${text.replace(/\n/g, '<br>')}</p>
            </div>
        `).join('');
    }

    function updatePreview(el, text) {
        document.getElementById('preview-text').innerHTML = text.replace(/\n/g, '<br>');
        document.querySelectorAll('.ai-option-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
    }

    function completePurchase() {
        if (document.getElementById('preview-text').innerText.includes("ì„ íƒí•˜ì‹œë©´")) {
            alert("ìƒí™©ê³¼ ë¬¸êµ¬ë¥¼ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”!");
            return;
        }
        alert("ì„±ê³µì ìœ¼ë¡œ ì£¼ë¬¸ë˜ì—ˆìŠµë‹ˆë‹¤! ì •ì„±ì„ ë‹¤í•´ ì¹´ë“œì™€ ê½ƒì„ ë°°ì†¡í•˜ê² ìŠµë‹ˆë‹¤.");
        closeModal();
    }
</script>

</body>
</html>
